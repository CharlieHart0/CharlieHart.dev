<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Voxel Rendering and World Generation System | charliehart.dev</title>
<meta name="keywords" content="3D, Unity, PC, Dissertation, University, C Sharp">
<meta name="description" content="My undergraduate dissertation project was to create and optimise a voxel based rendering and world generation system. Inspiration for this project was clearly drawn from Minecraft, one of the most popular games of all time, but also from games such as Astroneer - which uses a voxel system at the core of its player destructible world.
I used Unity for this project, and created a voxel rendering system which was able to generate a set of triangular meshes, with the correct textures applied, to represent an inputted three dimensional array of blocks, which had been generated using smooth noise functions.">
<meta name="author" content="Charlie Hart">
<link rel="canonical" href="https://charliehart.dev/3d/voxel-world-diss-en/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://charliehart.dev/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://charliehart.dev/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://charliehart.dev/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://charliehart.dev/apple-touch-icon.png">
<link rel="mask-icon" href="https://charliehart.dev/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://charliehart.dev/3d/voxel-world-diss-en/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Voxel Rendering and World Generation System" />
<meta property="og:description" content="My undergraduate dissertation project was to create and optimise a voxel based rendering and world generation system. Inspiration for this project was clearly drawn from Minecraft, one of the most popular games of all time, but also from games such as Astroneer - which uses a voxel system at the core of its player destructible world.
I used Unity for this project, and created a voxel rendering system which was able to generate a set of triangular meshes, with the correct textures applied, to represent an inputted three dimensional array of blocks, which had been generated using smooth noise functions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://charliehart.dev/3d/voxel-world-diss-en/" /><meta property="article:section" content="3D" />
<meta property="article:published_time" content="2024-01-17T11:19:00+00:00" />
<meta property="article:modified_time" content="2023-05-07T11:19:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Voxel Rendering and World Generation System"/>
<meta name="twitter:description" content="My undergraduate dissertation project was to create and optimise a voxel based rendering and world generation system. Inspiration for this project was clearly drawn from Minecraft, one of the most popular games of all time, but also from games such as Astroneer - which uses a voxel system at the core of its player destructible world.
I used Unity for this project, and created a voxel rendering system which was able to generate a set of triangular meshes, with the correct textures applied, to represent an inputted three dimensional array of blocks, which had been generated using smooth noise functions."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "3D Projects",
      "item": "https://charliehart.dev/3d/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Voxel Rendering and World Generation System",
      "item": "https://charliehart.dev/3d/voxel-world-diss-en/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Voxel Rendering and World Generation System",
  "name": "Voxel Rendering and World Generation System",
  "description": "My undergraduate dissertation project was to create and optimise a voxel based rendering and world generation system. Inspiration for this project was clearly drawn from Minecraft, one of the most popular games of all time, but also from games such as Astroneer - which uses a voxel system at the core of its player destructible world.\nI used Unity for this project, and created a voxel rendering system which was able to generate a set of triangular meshes, with the correct textures applied, to represent an inputted three dimensional array of blocks, which had been generated using smooth noise functions.",
  "keywords": [
    "3D", "Unity", "PC", "Dissertation", "University", "C Sharp"
  ],
  "articleBody": "My undergraduate dissertation project was to create and optimise a voxel based rendering and world generation system. Inspiration for this project was clearly drawn from Minecraft, one of the most popular games of all time, but also from games such as Astroneer - which uses a voxel system at the core of its player destructible world.\nI used Unity for this project, and created a voxel rendering system which was able to generate a set of triangular meshes, with the correct textures applied, to represent an inputted three dimensional array of blocks, which had been generated using smooth noise functions.\nOptimisations were then added to the project, and their impacts were evaluated. It was found that using object pooling for face meshes increased terrain load speeds by an average of 30.7%, and that ‘internal face culling’ - that is, generating meshes only for block faces deemed to be exposed to the ‘air’ in the game world - increased frame rates substantially, by over 1,700%, and allowed significantly larger voxel worlds to be rendered.\nPictured: A screenshot of a 112x48x112 voxel world, using the world generation system to create both hills and caves.\nDissertation Dissertation PDF document\nThe dissertation document goes into significantly more detail about this project, many details are omitted in this post to keep it an appropriate length.\nTry It! Dissertation Github Repository - Contains the excecutable project, recorded test data, and the Unity project files, including all written code.\nRequired Device: Windows PC\nRecommended: At least 8GB of RAM, and a dedicated GPU with at least 2GB of VRAM.\nDevelopment Voxel Rendering Each voxel - wether empty or a solid block - has a corresponding Unity gameobject in the respective voxel position within the world, and when a chunk’s RenderChunk() function is called, it calls functions within each voxel object to generate the face meshes required to render the scene.\nThen, the correct block material is applied, with each block’s material containing 6 textures to be applied, one for each direction on the world’s 3D axis, both positive and negative. These textures are stored on a single image, and loaded into memory together, in the same way a sprite atlas may be used for 2D graphics.\nWorld Generation Terrain is generated in a fixed radius around the camera, in a square shape. As the camera moves on either the X or Z axis, more chunks of terrain are generated, and the chunks which are now outside the specified render distance are removed.\nThe world generation algorithm uses a seed to generate worlds, so that the same world could be used when evaluating the effectiveness of optimisations. For each chunk, a set of nested Lists are used to store block information, one for each axis.\nI realise that this is far from optimal, as reading and writing to lists is much slower than using an array, and there will be a significant amount of repeated data here, for example the approximately 50% of the game world consisting of stone blocks. It may be worth investigating ways to optimise this, as terrain generation was significantly slower than I’d like it to be.\nAlgorithm Each voxel’s position is used as an input to the evaluateBlock() function, which returns the ID of the block which has been generated at that position. This function completes the following steps:\nIf the Y position is 0, a block of lava is generated, so that any generated caves are guaranteed to have solid blocks at the bottom, and are not open to the void.\nThe height of the hills at this position on the X and Z axis is calculated. Perlin noise is sampled here, and is used to interpolate between the given minimum and maximum hill heights in the world config. A Unity AnimationCurve is used to modify the gradient of hills visually inside the Unity editor.\nCaves are generated. Three dimensional Perlin noise is processed by comparing the square of a sampled value to a threshold value, in order to turn the float samples into boolean values. The samples which evaluate to true here are then set to air blocks, carving holes into the game world.\nFuture Work Areas of future work include:\nVariations of block shapes, such as half blocks, ramps, window panes etc.\nVariations of block shading, such as semi transparent blocks like glass, leaves, windows, or water blocks which could add post processing effects to the screen\nA voxel lighting system could be added, such that some blocks could emit light, with the light attenuating over a distance.\nA system to save and import world configurations, so that custom worlds could be displayed, for example a voxel model instead of a naturally generated world.\nAsynchronous terrain generation could be implemented, or the terrain generation could be further optimised, so that the generation of terrain does not cause the game to freeze.\n",
  "wordCount" : "811",
  "inLanguage": "en",
  "datePublished": "2024-01-17T11:19:00Z",
  "dateModified": "2023-05-07T11:19:00Z",
  "author":{
    "@type": "Person",
    "name": "Charlie Hart"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://charliehart.dev/3d/voxel-world-diss-en/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "charliehart.dev",
    "logo": {
      "@type": "ImageObject",
      "url": "https://charliehart.dev/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://charliehart.dev/" accesskey="h" title="charliehart.dev (Alt + H)">charliehart.dev</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://charliehart.dev/de/" title="German"
                            aria-label=":de:">🇩🇪</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://charliehart.dev/2d/" title="2D Projects">
                    <span>2D Projects</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/3d/" title="3D Projects">
                    <span>3D Projects</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/misc/" title="Misc Projects">
                    <span>Misc Projects</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://charliehart.dev/">Home</a>&nbsp;»&nbsp;<a href="https://charliehart.dev/3d/">3D Projects</a></div>
    <h1 class="post-title entry-hint-parent">
      Voxel Rendering and World Generation System
    </h1>
    <div class="post-meta"><span title='2023-05-07 11:19:00 +0000 UTC'>May 7, 2023</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Charlie Hart

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#dissertation" aria-label="Dissertation">Dissertation</a></li>
                <li>
                    <a href="#try-it" aria-label="Try It!">Try It!</a></li>
                <li>
                    <a href="#development" aria-label="Development">Development</a><ul>
                        
                <li>
                    <a href="#voxel-rendering" aria-label="Voxel Rendering">Voxel Rendering</a></li>
                <li>
                    <a href="#world-generation" aria-label="World Generation">World Generation</a><ul>
                        
                <li>
                    <a href="#algorithm" aria-label="Algorithm">Algorithm</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#future-work" aria-label="Future Work">Future Work</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>My undergraduate dissertation project was to create and optimise a voxel based rendering and world generation system. Inspiration for this project was clearly drawn from Minecraft, one of the most popular games of all time, but also from games such as Astroneer - which uses a voxel system at the core of its player destructible world.</p>
<p>I used Unity for this project, and created a voxel rendering system which was able to generate a set of triangular meshes, with the correct textures applied, to represent an inputted three dimensional array of blocks, which had been generated using smooth noise functions.</p>
<p>Optimisations were then added to the project, and their impacts were evaluated. It was found that using object pooling for face meshes increased terrain load speeds by an average of 30.7%, and that &lsquo;internal face culling&rsquo; - that is, generating meshes only for block faces deemed to be exposed to the &lsquo;air&rsquo; in the game world - increased frame rates substantially, by over 1,700%, and allowed significantly larger voxel worlds to be rendered.</p>
<img title="" src="https://i.imgur.com/ZED5342.png" alt="">
<p>Pictured: A screenshot of a 112x48x112 voxel world, using the world generation system to create both hills and caves.</p>
<h2 id="dissertation">Dissertation<a hidden class="anchor" aria-hidden="true" href="#dissertation">#</a></h2>
<p><a href="https://github.com/CharlieHart0/VoxelDissertation/blob/main/Charlie_Hart_Dissertation.pdf">Dissertation PDF document</a></p>
<p>The dissertation document goes into significantly more detail about this project, many details are omitted in this post to keep it an appropriate length.</p>
<h2 id="try-it">Try It!<a hidden class="anchor" aria-hidden="true" href="#try-it">#</a></h2>
<p><a href="https://github.com/CharlieHart0/VoxelDissertation">Dissertation Github Repository</a> - Contains the excecutable project, recorded test data, and the Unity project files, including all written code.</p>
<p>Required Device: Windows PC</p>
<p>Recommended: At least 8GB of RAM, and a dedicated GPU with at least 2GB of VRAM.</p>
<h2 id="development">Development<a hidden class="anchor" aria-hidden="true" href="#development">#</a></h2>
<h3 id="voxel-rendering">Voxel Rendering<a hidden class="anchor" aria-hidden="true" href="#voxel-rendering">#</a></h3>
<p>Each voxel - wether empty or a solid block - has a corresponding Unity gameobject in the respective voxel position within the world, and when a chunk&rsquo;s <code>RenderChunk()</code> function is called, it calls functions within each voxel object to generate the face meshes required to render the scene.</p>
<p>Then, the correct block material is applied, with each block&rsquo;s material containing 6 textures to be applied, one for each direction on the world&rsquo;s 3D axis, both positive and negative. These textures are stored on a single image, and loaded into memory together, in the same way a sprite atlas may be used for 2D graphics.</p>
<img title="" src="https://i.imgur.com/djnyScP.png" alt="">
<h3 id="world-generation">World Generation<a hidden class="anchor" aria-hidden="true" href="#world-generation">#</a></h3>
<p>Terrain is generated in a fixed radius around the camera, in a square shape. As the camera moves on either the X or Z axis, more chunks of terrain are generated, and the chunks which are now outside the specified render distance are removed.</p>
<p>The world generation algorithm uses a seed to generate worlds, so that the same world could be used when evaluating the effectiveness of optimisations. For each chunk, a set of nested <code>List</code>s are used to store block information, one for each axis.</p>
<p>I realise that this is far from optimal, as reading and writing to lists is much slower than using an array, and there will be a significant amount of repeated data here, for example the approximately 50% of the game world consisting of stone blocks. It may be worth investigating ways to optimise this, as terrain generation was significantly slower than I&rsquo;d like it to be.</p>
<h4 id="algorithm">Algorithm<a hidden class="anchor" aria-hidden="true" href="#algorithm">#</a></h4>
<p>Each voxel&rsquo;s position is used as an input to the <code>evaluateBlock()</code> function, which returns the ID of the block which has been generated at that position. This function completes the following steps:</p>
<ul>
<li>
<p>If the Y position is 0, a block of lava is generated, so that any generated caves are guaranteed to have solid blocks at the bottom, and are not open to the void.</p>
</li>
<li>
<p>The height of the hills at this position on the X and Z axis is calculated. Perlin noise is sampled here, and is used to interpolate between the given minimum and maximum hill heights in the world config. A Unity <code>AnimationCurve</code> is used to modify the gradient of hills visually inside the Unity editor.</p>
</li>
<li>
<p>Caves are generated. Three dimensional Perlin noise is processed by comparing the square of a sampled value to a threshold value, in order to turn the float samples into boolean values. The samples which evaluate to true here are then set to air blocks, carving holes into the game world.</p>
</li>
</ul>
<img title="" src="https://i.imgur.com/GTy34BH.png" alt="">
<h2 id="future-work">Future Work<a hidden class="anchor" aria-hidden="true" href="#future-work">#</a></h2>
<p>Areas of future work include:</p>
<ul>
<li>
<p>Variations of block shapes, such as half blocks, ramps, window panes etc.</p>
</li>
<li>
<p>Variations of block shading, such as semi transparent blocks like glass, leaves, windows, or water blocks which could add post processing effects to the screen</p>
</li>
<li>
<p>A voxel lighting system could be added, such that some blocks could emit light, with the light attenuating over a distance.</p>
</li>
<li>
<p>A system to save and import world configurations, so that custom worlds could be displayed, for example a voxel model instead of a naturally generated world.</p>
</li>
<li>
<p>Asynchronous terrain generation could be implemented, or the terrain generation could be further optimised, so that the generation of terrain does not cause the game to freeze.</p>
</li>
</ul>
<h3 id="heading"><a hidden class="anchor" aria-hidden="true" href="#heading">#</a></h3>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://charliehart.dev/tags/3d/">3D</a></li>
      <li><a href="https://charliehart.dev/tags/unity/">Unity</a></li>
      <li><a href="https://charliehart.dev/tags/pc/">PC</a></li>
      <li><a href="https://charliehart.dev/tags/dissertation/">Dissertation</a></li>
      <li><a href="https://charliehart.dev/tags/university/">University</a></li>
      <li><a href="https://charliehart.dev/tags/c-sharp/">C Sharp</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://charliehart.dev/2d/trijam-paid-in-blood-en/">
    <span class="title">« Prev</span>
    <br>
    <span>Trijam #226 - Paid in Blood</span>
  </a>
  <a class="next" href="https://charliehart.dev/2d/language-game-en/">
    <span class="title">Next »</span>
    <br>
    <span>The Language Game</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://charliehart.dev/">charliehart.dev</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
