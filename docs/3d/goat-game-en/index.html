<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Goat Heist | charliehart.dev</title>
<meta name="keywords" content="3D, cpp, PC, University, Physics, AI">
<meta name="description" content="The Goat Heist game was my coursework for the module &lsquo;Advanced Game Technologies&rsquo;, where we were tasked with creating a simple game in C&#43;&#43;. We were given a codebase which handled the graphics portion of the game, but needed to add a physics system, some physics related game mechanics, state based AI and pathfinding.
The required features for the coursework included:
Create a game in which the player must attempt to steal a guarded item from a building inside a voxelised world.">
<meta name="author" content="Charlie Hart">
<link rel="canonical" href="https://charliehart.dev/3d/goat-game-en/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://charliehart.dev/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://charliehart.dev/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://charliehart.dev/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://charliehart.dev/apple-touch-icon.png">
<link rel="mask-icon" href="https://charliehart.dev/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://charliehart.dev/3d/goat-game-en/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Goat Heist" />
<meta property="og:description" content="The Goat Heist game was my coursework for the module &lsquo;Advanced Game Technologies&rsquo;, where we were tasked with creating a simple game in C&#43;&#43;. We were given a codebase which handled the graphics portion of the game, but needed to add a physics system, some physics related game mechanics, state based AI and pathfinding.
The required features for the coursework included:
Create a game in which the player must attempt to steal a guarded item from a building inside a voxelised world." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://charliehart.dev/3d/goat-game-en/" /><meta property="article:section" content="3D" />
<meta property="article:published_time" content="2024-02-01T10:56:00+00:00" />
<meta property="article:modified_time" content="2023-12-14T13:41:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Goat Heist"/>
<meta name="twitter:description" content="The Goat Heist game was my coursework for the module &lsquo;Advanced Game Technologies&rsquo;, where we were tasked with creating a simple game in C&#43;&#43;. We were given a codebase which handled the graphics portion of the game, but needed to add a physics system, some physics related game mechanics, state based AI and pathfinding.
The required features for the coursework included:
Create a game in which the player must attempt to steal a guarded item from a building inside a voxelised world."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "3D Projects",
      "item": "https://charliehart.dev/3d/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Goat Heist",
      "item": "https://charliehart.dev/3d/goat-game-en/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Goat Heist",
  "name": "Goat Heist",
  "description": "The Goat Heist game was my coursework for the module \u0026lsquo;Advanced Game Technologies\u0026rsquo;, where we were tasked with creating a simple game in C++. We were given a codebase which handled the graphics portion of the game, but needed to add a physics system, some physics related game mechanics, state based AI and pathfinding.\nThe required features for the coursework included:\nCreate a game in which the player must attempt to steal a guarded item from a building inside a voxelised world.",
  "keywords": [
    "3D", "cpp", "PC", "University", "Physics", "AI"
  ],
  "articleBody": "The Goat Heist game was my coursework for the module ‘Advanced Game Technologies’, where we were tasked with creating a simple game in C++. We were given a codebase which handled the graphics portion of the game, but needed to add a physics system, some physics related game mechanics, state based AI and pathfinding.\nThe required features for the coursework included:\nCreate a game in which the player must attempt to steal a guarded item from a building inside a voxelised world.\nThere should be items in the world which can be picked up by the player to aid them.\nPoints should be awarded for progressing towards the goal.\nThe player should be controlled by the keyboard via forces or impulses\nThe game should feature a simple state based menu system\nCollision detection and resolution should be used to create obstacles for the player\nWhen the player steals the heist item, they must make their way back to the start while all enemies now pathfind towards the player at all times.\nAI characters should patrol the level and pursue the player when a line of slight is made, using raycasting and a pathfinding algorithm.\nDevelopment Physics The base game I was given to build from did not have much of a physics system at all, and over the course of development, many features were added, such as Raycasting, Linear and Angular Motion, Collision Detection and Response.\nRaycasting was used by the enemy actors to determine whether the player was considered ‘Visible’ to an enemy, and had a line of sight to it. This would inform the AI’s behaviour, covered later.\nThe linear and angular motion implemented several functions to perform operations such as integrating linear and angular acceleration and velocity for a given set of forces for each time step, allowing forces to be applied to objects, and for the objects to then move in a realistic manner as a result of these forces.\nCollision detection between spheres and Axis Aligned bounding boxes was implemented, with collisions returning collision information such as pointers to both objects involved in the collision and the location and orientation of the contact point or area between the two objects, and by what penetration distance the objects have intersected.\nThe impulse method was used for collision resolution, where the linear and angular velocities of the two PhysicsObjects were changed without integrating the acceleration first. This uses a coefficient of restitution to determine how much velocity is affected by the loss of kinetic energy due to deformation or conversion to thermal energy.\nAI State Machines The enemy actors in the game make use of AI and pathfinding features, and the enemies operate using a simple state machine, with three states: Patrol, Chase Player and Target Player. Transitions between these states occur when a condition is met, and the state machine is in the correct state to be able to transition to another.\nPatrol - The enemy will choose a random reachable location inside the maze, and move towards it.\nChase Player - When the player is in sight of the enemy (a raycast to the player is not blocked by any collider), the enemy moves in a straight line towards the player.\nTarget Player - When the player picks up the heist goal item and starts heading back to the starting location, all enemies will pathfind towards the player, regardless of if the player is visible, as the alarms have been triggered.\nA state machine is also used for the simple menu system in the game, and to implement different behaviour depending on the current game state - pregame, in progress or game over.\nPathfinding The A Star algorithm is used with a grid based navigation mesh for the enemies’ pathfinding. The game level is loaded using the methods described below, and the tiles considered solid - doors and walls - are areas that the enemies are unable to walk through, whereas all other tiles are not solid.\nIn game, Debug lines are drawn on screen showing the current path taken by each enemy. Green lines show the full path that will be taken by the enemy, and a light blue line shows the forces being applied to the enemy to move it towards the next waypoint in the path.\nNetworking Some basic networking features were added into the codebase as part of the module work, though they did not ultimately make their way into the final game due to time constraints.\nPNG level loader As part of this project, I had to change the design of the game level many times to accomodate and show the new features that were added. When the walls of the level are made of cubes, the positions of which must be manually entered line by line in code, this made iterating on the level design very slow. In order to solve this issue, without spending too much time to do so - as no marks were given for level design - I wrote a couple of functions to load a level using a PNG image, where different coloured pixels represented different objects/entities to be placed on a grid layout.\nThe stb_image image loader was used to load a PNG file, and then, for each pixel in the image, a corresponding world space position was calculated, according to the given scale value, and then one of many objects was placed at the location, such as doors, keys, enemies, or walls.\nuint8_t* rgb_image = stbi_load(\"../Assets/map3.png\", \u0026width, \u0026height, \u0026bpp, 3); for (int h = 0; h \u003c height; h++) { for (int w = 0; w \u003c width; w++) { int locationInt = (w+(h*width)) * 3; Vector3 col = Vector3(rgb_image[locationInt], rgb_image[locationInt + 1], rgb_image[locationInt + 2]); if (col == Vector3(0, 0, 0)) { continue; } Vector3 location = mapOrigin + Vector3(w * 2.0f * cubeHalfDim, 0, h * 2.0f * cubeHalfDim); // a switch statement would be nice here but it didnt seem to want to work with vector3s if (col == Vector3(255, 255, 255)) { AddCubeToWorld(location, cubeDimensions, 0.0f); continue; } if (col == Vector3(255, 0, 0)) { AddDoorCube(location,cubeDimensions); continue; } if (col == Vector3(0, 255, 255)) { AddStartingPlate(location); for (PlayerCharacter* p : players) { p-\u003eGetTransform().SetPosition(location); p-\u003eSetInitPosition(location); } continue; } if (col == Vector3(255, 255, 0)) { AddBonusToWorld(location,GameObject::ObjectType::PickupKey); continue; } if (col == Vector3(255, 0, 255)) { AddBonusToWorld(location, GameObject::ObjectType::PickupGoal); continue; } if (col == Vector3(0, 0, 255)) { AddBonusToWorld(location, GameObject::ObjectType::PickupInvisibility); continue; } if (col == Vector3(191, 191, 191)) { GameObject* cube = AddCubeToWorld(location, cubeDimensions, 2.0f); cube-\u003eGetRenderObject()-\u003eSetColour(Vector4(0.3f, 0.3f, 0.3f,1)); continue; } if (col == Vector3(255, 100, 0)) { AddEnemyToWorld(location); continue; } } } stbi_image_free(rgb_image); An example of the PNG from which the level would be loaded. Upscaled by 400% in order to display properly on this website.\nFuture Work Networking and a multiplayer component to the game, with the player able to host a game and connect to other players by entering their IP address\nFriction between physics objects should be implemented, so that the actors in the game do not slide around on the floor when moving. This would also give the player greater control over the player character.\nComplex shaped collision volumes, such as capsules or oriented bounding volumes.\nBehaviour trees could be added to the enemy AI in order to give them more complex behaviours and gameplay interaction.\nThe addition of collision layers and trigger volumes would allow for a wider variety of gameplay features, and would improve some present features, such as powerups which the player does not collide with, making them lose all momentum.\nPhysics objects could each have a unique coefficient of restitution, with each collision pair using a calculated value for its CoR, as an average of the two colliding objects’ CORs.\n",
  "wordCount" : "1286",
  "inLanguage": "en",
  "datePublished": "2024-02-01T10:56:00Z",
  "dateModified": "2023-12-14T13:41:00Z",
  "author":{
    "@type": "Person",
    "name": "Charlie Hart"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://charliehart.dev/3d/goat-game-en/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "charliehart.dev",
    "logo": {
      "@type": "ImageObject",
      "url": "https://charliehart.dev/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://charliehart.dev/" accesskey="h" title="charliehart.dev (Alt + H)">charliehart.dev</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://charliehart.dev/de/" title="German"
                            aria-label=":de:">🇩🇪</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://charliehart.dev/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/2d/" title="2D Projects">
                    <span>2D Projects</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/3d/" title="3D Projects">
                    <span>3D Projects</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/misc/" title="Misc Projects">
                    <span>Misc Projects</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://charliehart.dev/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://charliehart.dev/">Home</a>&nbsp;»&nbsp;<a href="https://charliehart.dev/3d/">3D Projects</a></div>
    <h1 class="post-title entry-hint-parent">
      Goat Heist
    </h1>
    <div class="post-meta"><span title='2023-12-14 13:41:00 +0000 UTC'>December 14, 2023</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Charlie Hart

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#development" aria-label="Development">Development</a><ul>
                        
                <li>
                    <a href="#physics" aria-label="Physics">Physics</a></li>
                <li>
                    <a href="#ai" aria-label="AI">AI</a><ul>
                        
                <li>
                    <a href="#state-machines" aria-label="State Machines">State Machines</a></li>
                <li>
                    <a href="#pathfinding" aria-label="Pathfinding">Pathfinding</a></li></ul>
                </li>
                <li>
                    <a href="#networking" aria-label="Networking">Networking</a></li>
                <li>
                    <a href="#png-level-loader" aria-label="PNG level loader">PNG level loader</a></li></ul>
                </li>
                <li>
                    <a href="#future-work" aria-label="Future Work">Future Work</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>The Goat Heist game was my coursework for the module &lsquo;Advanced Game Technologies&rsquo;, where we were tasked with creating a simple game in C++. We were given a codebase which handled the graphics portion of the game, but needed to add a physics system, some physics related game mechanics, state based AI and pathfinding.</p>
<p>The required features for the coursework included:</p>
<ul>
<li>
<p>Create a game in which the player must attempt to steal a guarded item from a building inside a voxelised world.</p>
</li>
<li>
<p>There should be items in the world which can be picked up by the player to aid them.</p>
</li>
<li>
<p>Points should be awarded for progressing towards the goal.</p>
</li>
<li>
<p>The player should be controlled by the keyboard via forces or impulses</p>
</li>
<li>
<p>The game should feature a simple state based menu system</p>
</li>
<li>
<p>Collision detection and resolution should be used to create obstacles for the player</p>
</li>
<li>
<p>When the player steals the heist item, they must make their way back to the start while all enemies now pathfind towards the player at all times.</p>
</li>
<li>
<p>AI characters should patrol the level and pursue the player when a line of slight is made, using raycasting and a pathfinding algorithm.</p>
</li>
</ul>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/fiOnfmi2uF0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h2 id="development">Development<a hidden class="anchor" aria-hidden="true" href="#development">#</a></h2>
<h3 id="physics">Physics<a hidden class="anchor" aria-hidden="true" href="#physics">#</a></h3>
<p>The base game I was given to build from did not have much of a physics system at all, and over the course of development, many features were added, such as Raycasting, Linear and Angular Motion, Collision Detection and Response.</p>
<p>Raycasting was used by the enemy actors to determine whether the player was considered &lsquo;Visible&rsquo; to an enemy, and had a line of sight to it. This would inform the AI&rsquo;s behaviour, covered later.</p>
<p>The linear and angular motion implemented several functions to perform operations such as integrating linear and angular acceleration and velocity for a given set of forces for each time step, allowing forces to be applied to objects, and for the objects to then move in a realistic manner as a result of these forces.</p>
<p>Collision detection between spheres and Axis Aligned bounding boxes was implemented, with collisions returning collision information such as pointers to both objects involved in the collision and the location and orientation of the contact point or area between the two objects, and by what penetration distance the objects have intersected.</p>
<p>The impulse method was used for collision resolution, where the linear and angular velocities of the two <code>PhysicsObject</code>s were changed without integrating the acceleration first. This uses a coefficient of restitution to determine how much velocity is affected by the loss of kinetic energy due to deformation or conversion to thermal energy.</p>
<h3 id="ai">AI<a hidden class="anchor" aria-hidden="true" href="#ai">#</a></h3>
<h4 id="state-machines">State Machines<a hidden class="anchor" aria-hidden="true" href="#state-machines">#</a></h4>
<p>The enemy actors in the game make use of AI and pathfinding features, and the enemies operate using a simple state machine, with three states: Patrol, Chase Player and Target Player. Transitions between these states occur when a condition is met, and the state machine is in the correct state to be able to transition to another.</p>
<p>Patrol - The enemy will choose a random reachable location inside the maze, and move towards it.</p>
<p>Chase Player - When the player is in sight of the enemy (a raycast to the player is not blocked by any collider), the enemy moves in a straight line towards the player.</p>
<p>Target Player - When the player picks up the heist goal item and starts heading back to the starting location, all enemies will pathfind towards the player, regardless of if the player is visible, as the alarms have been triggered.</p>
<p>A state machine is also used for the simple menu system in the game, and to implement different behaviour depending on the current game state - pregame, in progress or game over.</p>
<h4 id="pathfinding">Pathfinding<a hidden class="anchor" aria-hidden="true" href="#pathfinding">#</a></h4>
<p>The A Star algorithm is used with a grid based navigation mesh for the enemies&rsquo; pathfinding. The game level is loaded using the methods described below, and the tiles considered solid - doors and walls - are areas that the enemies are unable to walk through, whereas all other tiles are not solid.</p>
<p>In game, Debug lines are drawn on screen showing the current path taken by each enemy. Green lines show the full path that will be taken by the enemy, and a light blue line shows the forces being applied to the enemy to move it towards the next waypoint in the path.</p>
<h3 id="networking">Networking<a hidden class="anchor" aria-hidden="true" href="#networking">#</a></h3>
<p>Some basic networking features were added into the codebase as part of the module work, though they did not ultimately make their way into the final game due to time constraints.</p>
<h3 id="png-level-loader">PNG level loader<a hidden class="anchor" aria-hidden="true" href="#png-level-loader">#</a></h3>
<p>As part of this project, I had to change the design of the game level many times to accomodate and show the new features that were added. When the walls of the level are made of cubes, the positions of which must be manually entered line by line in code, this made iterating on the level design very slow.  In order to solve this issue, without spending too much time to do so - as no marks were given for level design - I wrote a couple of functions to load a level using a PNG image, where different coloured pixels represented different objects/entities to be placed on a grid layout.</p>
<p>The <a href="http://nothings.org/stb/">stb_image</a> image loader was used to load a PNG file, and then, for each pixel in the image, a corresponding world space position was calculated, according to the given scale value, and then one of many objects was placed at the location, such as doors, keys, enemies, or walls.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">uint8_t</span><span class="o">*</span> <span class="n">rgb_image</span> <span class="o">=</span> <span class="n">stbi_load</span><span class="p">(</span><span class="s">&#34;../Assets/map3.png&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">width</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">height</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">bpp</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">h</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">;</span> <span class="n">h</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">w</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">w</span> <span class="o">&lt;</span> <span class="n">width</span><span class="p">;</span> <span class="n">w</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">locationInt</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span><span class="o">+</span><span class="p">(</span><span class="n">h</span><span class="o">*</span><span class="n">width</span><span class="p">))</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Vector3</span> <span class="n">col</span> <span class="o">=</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">rgb_image</span><span class="p">[</span><span class="n">locationInt</span><span class="p">],</span> <span class="n">rgb_image</span><span class="p">[</span><span class="n">locationInt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">rgb_image</span><span class="p">[</span><span class="n">locationInt</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">Vector3</span> <span class="n">location</span> <span class="o">=</span> <span class="n">mapOrigin</span> <span class="o">+</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">w</span> <span class="o">*</span> <span class="mf">2.0f</span> <span class="o">*</span> <span class="n">cubeHalfDim</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">h</span> <span class="o">*</span> <span class="mf">2.0f</span> <span class="o">*</span> <span class="n">cubeHalfDim</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// a switch statement would be nice here but it didnt seem to want to work with vector3s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">Vector3</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AddCubeToWorld</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">cubeDimensions</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">Vector3</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AddDoorCube</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">cubeDimensions</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AddStartingPlate</span><span class="p">(</span><span class="n">location</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="n">PlayerCharacter</span><span class="o">*</span> <span class="nl">p</span> <span class="p">:</span> <span class="n">players</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span><span class="o">-&gt;</span><span class="n">GetTransform</span><span class="p">().</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">location</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span><span class="o">-&gt;</span><span class="n">SetInitPosition</span><span class="p">(</span><span class="n">location</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">Vector3</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AddBonusToWorld</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">GameObject</span><span class="o">::</span><span class="n">ObjectType</span><span class="o">::</span><span class="n">PickupKey</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">Vector3</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AddBonusToWorld</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">GameObject</span><span class="o">::</span><span class="n">ObjectType</span><span class="o">::</span><span class="n">PickupGoal</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AddBonusToWorld</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">GameObject</span><span class="o">::</span><span class="n">ObjectType</span><span class="o">::</span><span class="n">PickupInvisibility</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">Vector3</span><span class="p">(</span><span class="mi">191</span><span class="p">,</span> <span class="mi">191</span><span class="p">,</span> <span class="mi">191</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">GameObject</span><span class="o">*</span> <span class="n">cube</span> <span class="o">=</span> <span class="n">AddCubeToWorld</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">cubeDimensions</span><span class="p">,</span> <span class="mf">2.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">cube</span><span class="o">-&gt;</span><span class="n">GetRenderObject</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">SetColour</span><span class="p">(</span><span class="n">Vector4</span><span class="p">(</span><span class="mf">0.3f</span><span class="p">,</span> <span class="mf">0.3f</span><span class="p">,</span> <span class="mf">0.3f</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="n">Vector3</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AddEnemyToWorld</span><span class="p">(</span><span class="n">location</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">stbi_image_free</span><span class="p">(</span><span class="n">rgb_image</span><span class="p">);</span>
</span></span></code></pre></div><p>An example of the PNG from which the level would be loaded. Upscaled by 400% in order to display properly on this website.</p>
<img title="" src="https://imgur.com/I8HWIpX" alt="">
<h2 id="future-work">Future Work<a hidden class="anchor" aria-hidden="true" href="#future-work">#</a></h2>
<ul>
<li>
<p>Networking and a multiplayer component to the game, with the player able to host a game and connect to other players by entering their IP address</p>
</li>
<li>
<p>Friction between physics objects should be implemented, so that the actors in the game do not slide around on the floor when moving. This would also give the player greater control over the player character.</p>
</li>
<li>
<p>Complex shaped collision volumes, such as capsules or oriented bounding volumes.</p>
</li>
<li>
<p>Behaviour trees could be added to the enemy AI in order to give them more complex behaviours and gameplay interaction.</p>
</li>
<li>
<p>The addition of collision layers and trigger volumes would allow for a wider variety of gameplay features, and would improve some present features, such as powerups which the player does not collide with, making them lose all momentum.</p>
</li>
<li>
<p>Physics objects could each have a unique coefficient of restitution, with each collision pair using a calculated value for its CoR, as an average of the two colliding objects&rsquo; CORs.</p>
</li>
</ul>
<h3 id="heading"><a hidden class="anchor" aria-hidden="true" href="#heading">#</a></h3>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://charliehart.dev/tags/3d/">3D</a></li>
      <li><a href="https://charliehart.dev/tags/cpp/">cpp</a></li>
      <li><a href="https://charliehart.dev/tags/pc/">PC</a></li>
      <li><a href="https://charliehart.dev/tags/university/">University</a></li>
      <li><a href="https://charliehart.dev/tags/physics/">Physics</a></li>
      <li><a href="https://charliehart.dev/tags/ai/">AI</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://charliehart.dev/misc/vita-hacking-en/">
    <span class="title">« Prev</span>
    <br>
    <span>Modding the PS Vita</span>
  </a>
  <a class="next" href="https://charliehart.dev/2d/trijam-paid-in-blood-en/">
    <span class="title">Next »</span>
    <br>
    <span>Trijam #226 - Paid in Blood</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://charliehart.dev/">charliehart.dev</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
